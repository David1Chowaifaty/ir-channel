{"file":"unassigned_dates.store-58eb94f7.js","mappings":";;;;AAMA,MAAMA,cAAY,GAAmB;IACnC,IAAI,EAAE,EAAE;IACR,MAAM,EAAE,EAAE;CACX,CAAC;MACW,EAAE,KAAK,EAAE,cAAc,EAAE,QAAQ,EAAE,qBAAqB,EAAE,GAAGC,iBAAW,CAAiBD,cAAY;;ACMlH,MAAM,YAAY,GAA0B;IAC1C,gBAAgB,EAAE,EAAE;CACrB,CAAC;IACS,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE,2BAA2B,EAAE,GAAGC,iBAAW,CAAwB,YAAY,EAAE;SAEjH,kBAAkB,CAAC,IAAqB;IACtD,gBAAgB,CAAC,gBAAgB,mCAAQ,gBAAgB,CAAC,gBAAgB,GAAK,IAAI,CAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;IAuBtF,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;AACjD,CAAC;SACe,kBAAkB;IAChC,OAAO,gBAAgB,CAAC,gBAAgB,CAAC;AAC3C,CAAC;SACe,qBAAqB,CAAC,SAAiB,EAAE,OAAe;IACtE,MAAM,aAAa,GAAG,sBAAsB,CAAC,SAAS,CAAC,CAAC;IACxD,MAAM,WAAW,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;IACpD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,GAAG;QACxD,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QACnC,IAAI,aAAa,IAAI,YAAY,IAAI,YAAY,IAAI,WAAW,EAAE;YAChE,OAAO,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;SAC/C;KACF,CAAC,CAAC;AACL,CAAC;AACD,SAAS,sBAAsB,CAAC,OAAe;IAC7C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;IAC/B,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC;AACxB;;;;;;;;","names":["initialState","createStore"],"sources":["src/stores/calendar-dates.store.ts","src/stores/unassigned_dates.store.ts"],"sourcesContent":["import { DayData } from '@/models/DayType';\nimport { createStore } from '@stencil/store';\nexport interface ICalendarDates {\n  days: DayData[];\n  months: { daysCount: number; monthName: string }[];\n}\nconst initialState: ICalendarDates = {\n  days: [],\n  months: [],\n};\nexport const { state: calendar_dates, onChange: onCalendarDatesChange } = createStore<ICalendarDates>(initialState);\n\nexport default calendar_dates;\n","import { createStore } from '@stencil/store';\r\n\r\ntype EventCategories = {};\r\n\r\ntype EventInfo = {\r\n  categories: EventCategories;\r\n  dateStr: string;\r\n};\r\n\r\ntype UnassignedDates = {\r\n  [timestamp: string]: EventInfo;\r\n};\r\ninterface IUnassignedDatesStore {\r\n  unassigned_dates: UnassignedDates;\r\n}\r\n\r\nconst initialState: IUnassignedDatesStore = {\r\n  unassigned_dates: {},\r\n};\r\nexport let { state: unassigned_dates, onChange: handleUnAssignedDatesChange } = createStore<IUnassignedDatesStore>(initialState);\r\n\r\nexport function addUnassingedDates(data: UnassignedDates) {\r\n  unassigned_dates.unassigned_dates = { ...unassigned_dates.unassigned_dates, ...data };\r\n  /*\r\n   try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  */\r\n  console.log(unassigned_dates.unassigned_dates);\r\n}\r\nexport function getUnassignedDates() {\r\n  return unassigned_dates.unassigned_dates;\r\n}\r\nexport function removeUnassignedDates(from_date: string, to_date: string) {\r\n  const fromTimestamp = convertToDateTimestamp(from_date);\r\n  const toTimestamp = convertToDateTimestamp(to_date);\r\n  Object.keys(unassigned_dates.unassigned_dates).forEach(key => {\r\n    const keyTimestamp = parseInt(key);\r\n    if (fromTimestamp <= keyTimestamp && keyTimestamp <= toTimestamp) {\r\n      delete unassigned_dates.unassigned_dates[key];\r\n    }\r\n  });\r\n}\r\nfunction convertToDateTimestamp(dateStr: string) {\r\n  const date = new Date(dateStr);\r\n  date.setHours(0, 0, 0, 0);\r\n  return date.getTime();\r\n}\r\n\r\nexport default unassigned_dates;\r\n"],"version":3}