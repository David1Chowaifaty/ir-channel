{"version":3,"file":"ir-room-nights.js","sourceRoot":"","sources":["../../../src/components/ir-room-nights/ir-room-nights.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport axios from 'axios';\r\nimport { BookingService } from '../../services/booking.service';\r\nimport { convertDatePrice, formatDate, getCurrencySymbol, getDaysArray } from '../../utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '../../models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '../../models/property-types';\r\nimport { v4 } from 'uuid';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() baseUrl: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.bookingService.setToken(calendar_data.token);\r\n\r\n    if (this.baseUrl) {\r\n      axios.defaults.baseURL = this.baseUrl;\r\n    }\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          const amount = await this.fetchBookingAvailability(\r\n            this.fromDate,\r\n            this.selectedRoom.days[0].date,\r\n            this.selectedRoom.rateplan.id,\r\n            this.selectedRoom.rateplan.selected_variation.adult_child_offering,\r\n          );\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n        } else {\r\n          const amount = await this.fetchBookingAvailability(\r\n            lastDay.date,\r\n            moment(this.toDate, 'YYYY-MM-DD').add(-1, 'days').format('YYYY-MM-DD'),\r\n            this.selectedRoom.rateplan.id,\r\n            this.selectedRoom.rateplan.selected_variation.adult_child_offering,\r\n          );\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n          ];\r\n        }\r\n        this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handleInput(event: InputEvent, index: number) {\r\n    let inputElement = event.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      const decimalCheck = inputValue.split('.');\r\n      if (decimalCheck.length > 2) {\r\n        inputValue = inputValue.substring(0, inputValue.length - 1);\r\n        inputElement.value = inputValue;\r\n      } else if (decimalCheck.length === 2 && decimalCheck[1].length > 2) {\r\n        inputValue = `${decimalCheck[0]}.${decimalCheck[1].substring(0, 2)}`;\r\n        inputElement.value = inputValue;\r\n      }\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n    console.log(this.rates);\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number, selected_variation: string) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability(\r\n        from_date,\r\n        to_date,\r\n        this.propertyId,\r\n        {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        this.language,\r\n        [this.selectedRoom.roomtype.id],\r\n        this.bookingEvent.currency,\r\n      );\r\n      this.inventory = bookingAvailability.roomtypes[0].inventory;\r\n      const rate_plan_index = bookingAvailability.roomtypes[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      const { amount } = rate_plan_index.variations.find(variation => variation.adult_child_offering === selected_variation);\r\n      return amount;\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <fieldset class=\"col-2 ml-1 position-relative has-icon-left m-0 p-0 rate-input-container\">\r\n        <div class=\"input-group-prepend bg-white\">\r\n          <span\r\n            data-disabled={this.inventory === 0 || this.inventory === null}\r\n            data-state={this.isInputFocused === index ? 'focus' : ''}\r\n            class=\"input-group-text new-currency bg-white\"\r\n            id=\"basic-addon1\"\r\n          >\r\n            {currency_symbol}\r\n          </span>\r\n        </div>\r\n        <input\r\n          onFocus={() => (this.isInputFocused = index)}\r\n          onBlur={() => (this.isInputFocused = -1)}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          type=\"text\"\r\n          class=\"form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder\"\r\n          id={v4()}\r\n          value={day.amount > 0 ? day.amount : ''}\r\n          placeholder={locales.entries.Lcz_Rate || 'Rate'}\r\n          onInput={event => this.handleInput(event, index)}\r\n        />\r\n      </fieldset>\r\n    );\r\n  }\r\n  renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = { ...oldRooms[selectedRoomIndex], days: this.rates, to_date: this.toDate, from_date: this.fromDate };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: this.fromDate,\r\n          to_date: this.toDate,\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      const { data } = await axios.post(`/DoReservation?Ticket=${this.ticket}`, body);\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return (\r\n        <div class=\"loading-container\">\r\n          <ir-loading-screen></ir-loading-screen>;\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          <p class={'font-weight-bold font-medium-1'}>{`${formatDate(this.fromDate, 'YYYY-MM-DD')} - ${formatDate(this.toDate, 'YYYY-MM-DD')}`}</p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHanlder={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHanlder={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}