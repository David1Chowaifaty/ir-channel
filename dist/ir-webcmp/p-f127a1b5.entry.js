import{r as e,c as t,h as i,H as s}from"./p-c8e6073c.js";import{B as a}from"./p-1c70a483.js";import{l}from"./p-f24c2f6c.js";import{c as n}from"./p-5ec9e53a.js";import{v as o}from"./p-4ed69de7.js";import"./p-103ecfd7.js";import"./p-f33057f4.js";import"./p-6c4ba7c0.js";import"./p-14712fa4.js";import"./p-5872a6ca.js";const d=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const c=d;const h=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new a;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.bookingService.setToken(n.token);this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log(this.fromDate);return i(s,{key:"9c21805b294839890e96edad31fbedacdf63b5b4"},i("div",{key:"547207f047eed5a17b0d4a845125ecd5c32d4613",class:`m-0 p-0 mb-1`},i("div",{key:"f2769e0e8b6a459326c07360f82779fed406612c",class:"text-left p-0"},i("ir-date-view",{key:"ab13359a0dd80e6f02a7f2c4122d9c3e7224375c",from_date:this.fromDate,dateOption:"DD MMM YYYY",showDateDifference:false,to_date:this.toDate}))),i("div",{key:"a11a83b07a8d455988df000365a4243c4565f64a",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},i("div",{key:"0f4f6492a6e2fa906692698ae3a74dd0307a36ee",class:"mb-1 "},i("label",{key:"183bbc1e536baec85c163a28ae9f49ce34d10d3b",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},l.entries.Lcz_Reason,":"),i("div",{key:"070947def5f622aa9e829f022df4dfa77820c786",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},i("input",{key:"d59ed226805a8667a078a027a68c2eaefc594f90",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),i("span",{key:"46634812558b1a5382e87127a9a4649688f5ec1c",class:"align-middle out-of-service-label"},l.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?i("div",null,i("div",{class:"mb-1 d-flex  align-items-center"},i("span",{class:"align-middle"},l.entries.Lcz_Or," "),i("div",{class:"d-inline-flex col pr-0 align-middle"},i("input",{class:"form-control",type:"text",placeholder:l.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),i("div",{class:"mb-1 w-100 pr-0 "},i("span",{class:"text-bold-700 font-medium-1"},l.entries.Lcz_AutomaticReleaseIn,": "),i("div",{class:"d-inline-block"},i("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>i("option",{value:+e.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+e.CODE_NAME},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?i("div",{class:"d-inline-block releaseTime"},i("em",null,l.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};h.style=c;const r="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px;width:100%}strong.sc-ota-label{margin:0;padding:0}ul.sc-ota-label{margin:0 3px;padding:0;list-style:none;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}li.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}button.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}button.sc-ota-label:hover{color:#355270}";const f=r;const p=class{constructor(t){e(this,t);this.toggleShowAll=()=>{this.showAll=!this.showAll};this.label=undefined;this.remarks=undefined;this.maxVisibleItems=3;this.showAll=false}render(){if(!this.remarks){return null}const e=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return i(s,null,i("strong",null,this.label),i("ul",null,e.map(((t,s)=>i("li",{key:o()},"- ",t.statement," ",this.remarks.length>this.maxVisibleItems&&s===e.length-1&&i("button",{onClick:this.toggleShowAll},this.showAll?l.entries.Lcz_ShowLess:l.entries.Lcz_ShowMore))))))}};p.style=f;export{h as igl_block_dates_view,p as ota_label};
//# sourceMappingURL=p-f127a1b5.entry.js.map